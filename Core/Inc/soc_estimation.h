/**
 * @brief Header for SOC Estimation
 * @author Angela Suresh
 * @date 1-14-24
 *
 */

#ifndef HVC_FIRMWARE_2024_SOC_ESTIMATION_H
#define HVC_FIRMWARE_2024_SOC_ESTIMATION_H
#define ARR_LEN 465


float socEstimation(float deltaTime);


static float arrX[ARR_LEN]{ //voltage
        587.58, 585.06, 582.4, 581.7, 581.14, 580.44, 579.74, 579.04,
        578.48, 577.92, 577.36, 576.8, 576.1, 575.82, 575.4, 575.12, 574.7, 574.42, 574, 573.86,
        573.58, 573.3, 573.16, 572.88, 572.74, 572.46, 572.18, 571.9, 571.62, 571.34, 571.06, 570.92,
        570.64, 570.5, 570.36, 570.22, 570.08, 569.94, 569.8, 569.66, 569.52, 569.38, 569.24, 569.24,
        569.1, 569.1, 568.96, 568.96, 568.96, 568.68, 568.54, 568.4, 568.26, 568.12, 567.98, 567.98,
        567.84, 567.84, 567.7, 567.7, 567.56, 567.42, 567.28, 567.14, 567, 566.86, 566.72, 566.72, 566.58,
        566.58, 566.44, 566.44, 566.3, 566.02, 565.74, 565.46, 565.18, 564.9, 564.62, 564.34, 564.06, 563.78,
        563.5, 563.22, 562.94, 562.66, 562.24, 561.96, 561.68, 561.26, 560.98, 560.7, 560.28, 560, 559.58,
        559.3, 558.88, 558.6, 558.18, 557.9, 557.62, 557.2, 556.92, 556.64, 556.36, 556.08, 555.66, 555.24,
        554.68, 554.26, 553.7, 553.28, 552.72, 552.44, 552.02, 551.74, 551.46, 551.04, 550.76, 550.34, 550.06,
        549.78, 549.36, 548.94, 548.52, 548.1, 547.68, 547.26, 546.84, 546.56, 546.14, 545.72, 545.44, 545.02,
        544.6, 544.32, 544.04, 543.76, 543.62, 543.34, 543.06, 542.92, 542.64, 542.36, 542.22, 541.94, 541.66,
        541.38, 541.1, 540.68, 540.4, 540.12, 539.84, 539.56, 539.28, 539, 538.72, 538.44, 538.16, 537.88, 537.6,
        537.32, 537.18, 536.9, 536.62, 536.34, 536.06, 535.78, 535.64, 535.36, 535.08, 534.8, 534.52, 534.38,
        534.24, 533.96, 533.82, 533.54, 533.4, 533.26, 532.98, 532.84, 532.7, 532.42, 532.28, 532, 531.72,
        531.44, 531.3, 531.02, 530.74, 530.46, 530.18, 529.9, 529.62, 529.34, 529.06, 528.78, 528.64, 528.36,
        528.08, 527.8, 527.52, 527.24, 526.82, 526.4, 525.98, 525.56, 525.14, 524.72, 524.58, 524.3, 524.02,
        523.88, 523.6, 523.32, 523.18, 522.9, 522.76, 522.34, 522.06, 521.64, 521.36, 520.94, 520.66, 520.38,
        519.96, 519.68, 519.4, 519.12, 518.84, 518.42, 518.14, 517.86, 517.58, 517.3, 517.02, 516.74, 516.32,
        516.04, 515.62, 515.34, 514.92, 514.64, 514.36, 513.94, 513.66, 513.24, 512.96, 512.68, 512.4, 512.12,
        511.98, 511.7, 511.42, 511.14, 511, 510.72, 510.44, 510.16, 510.02, 509.74, 509.46, 509.04, 508.76, 508.34,
        508.06, 507.64, 507.36, 506.94, 506.52, 506.24, 505.96, 505.68, 505.26, 504.98, 504.7, 504.28, 504, 503.72,
        503.44, 503.02, 502.74, 502.32, 502.04, 501.62, 501.2, 500.92, 500.5, 500.08, 499.66, 499.38, 498.96, 498.54,
        498.12, 497.7, 497.28, 496.86, 496.3, 495.88, 495.46, 495.04, 494.76, 494.62, 494.34, 494.06, 493.78, 493.5,
        493.22, 493.08, 492.66, 492.24, 491.82, 491.54, 491.12, 490.7, 490.28, 490, 489.58, 489.3, 489.16, 489.02,
        488.74, 488.6, 488.32, 488.18, 488.04, 487.76, 487.62, 487.34, 487.2, 486.92, 486.78, 486.5, 486.22, 485.94,
        485.66, 485.52, 485.24, 484.96, 484.68, 484.4, 483.84, 483.42, 482.86, 482.3, 481.74, 481.18, 480.62, 480.2,
        479.64, 479.08, 478.52, 478.1, 477.68, 477.26, 476.7, 476.28, 475.86, 475.44, 475.02, 474.46, 474.04, 473.62,
        473.2, 472.78, 472.22, 471.66, 471.1, 470.54, 469.84, 469.28, 468.58, 468.02, 467.46, 466.76, 466.2, 465.5,
        464.94, 464.24, 463.68, 462.98, 462.42, 461.72, 461.16, 460.46, 459.9, 459.2, 458.64, 457.94, 457.24, 456.68,
        455.98, 455.42, 454.72, 454.02, 453.32, 452.48, 451.64, 450.8, 449.96, 449.12, 448.28, 447.44, 446.6, 445.76,
        444.92, 444.08, 443.38, 442.54, 441.7, 441, 440.16, 439.46, 438.76, 437.92, 437.22, 436.52, 435.68, 434.98, 434,
        433.02, 431.9, 430.92, 429.94, 428.96, 427.84, 426.86, 425.88, 424.9, 423.78, 422.8, 421.82, 420.7, 419.72,
        418.74, 417.76, 416.64, 415.1, 413.42, 411.74, 410.06, 408.38, 406.98, 405.58, 404.18, 402.92, 401.52, 400.26,
        397.74, 395.08, 392.42, 389.9, 387.8, 385.7, 383.74, 381.5, 378.28, 374.92, 371.7, 367.64, 363.44, 359.38,
        355.32, 351.26
};
static float arrY[ARR_LEN]{ //percentages
        100, 99.7844827586207, 99.5689655172414, 99.3534482758621, 99.1379310344828, 98.9224137931034, 98.7068965517241,
        98.4913793103448, 98.2758620689655, 98.0603448275862, 97.8448275862069, 97.6293103448276, 97.4137931034483,
        97.198275862069, 96.9827586206897, 96.7672413793103, 96.551724137931, 96.3362068965517, 96.1206896551724,
        95.9051724137931, 95.6896551724138, 95.4741379310345, 95.2586206896552, 95.0431034482759, 94.8275862068966,
        94.6120689655172, 94.3965517241379, 94.1810344827586, 93.9655172413793, 93.75, 93.5344827586207,
        93.3189655172414, 93.1034482758621, 92.8879310344828, 92.6724137931034, 92.4568965517241, 92.2413793103448,
        92.0258620689655, 91.8103448275862, 91.5948275862069, 91.3793103448276, 91.1637931034483, 90.948275862069,
        90.7327586206897, 90.5172413793103, 90.301724137931, 90.0862068965517, 89.8706896551724, 89.6551724137931,
        89.4396551724138, 89.2241379310345, 89.0086206896552, 88.7931034482759, 88.5775862068966, 88.3620689655172,
        88.1465517241379, 87.9310344827586, 87.7155172413793, 87.5, 87.2844827586207, 87.0689655172414,
        86.8534482758621, 86.6379310344828, 86.4224137931034, 86.2068965517241, 85.9913793103448, 85.7758620689655,
        85.5603448275862, 85.3448275862069, 85.1293103448276, 84.9137931034483, 84.698275862069, 84.4827586206897,
        84.2672413793103, 84.051724137931, 83.8362068965517, 83.6206896551724, 83.4051724137931, 83.1896551724138,
        82.9741379310345, 82.7586206896552, 82.5431034482759, 82.3275862068966, 82.1120689655172, 81.8965517241379,
        81.6810344827586, 81.4655172413793, 81.25, 81.0344827586207, 80.8189655172414, 80.6034482758621,
        80.3879310344828, 80.1724137931034, 79.9568965517241, 79.7413793103448, 79.5258620689655, 79.3103448275862,
        79.0948275862069, 78.8793103448276, 78.6637931034483, 78.448275862069, 78.2327586206897, 78.0172413793103,
        77.801724137931, 77.5862068965517, 77.3706896551724, 77.1551724137931, 76.9396551724138, 76.7241379310345,
        76.5086206896552, 76.2931034482759, 76.0775862068966, 75.8620689655172, 75.6465517241379, 75.4310344827586,
        75.2155172413793, 75, 74.7844827586207, 74.5689655172414, 74.3534482758621, 74.1379310344828, 73.9224137931034,
        73.7068965517241, 73.4913793103448, 73.2758620689655, 73.0603448275862, 72.8448275862069, 72.6293103448276,
        72.4137931034483, 72.198275862069, 71.9827586206897, 71.7672413793103, 71.551724137931, 71.3362068965517,
        71.1206896551724, 70.9051724137931, 70.6896551724138, 70.4741379310345, 70.2586206896552, 70.0431034482759,
        69.8275862068966, 69.6120689655172, 69.3965517241379, 69.1810344827586, 68.9655172413793, 68.75,
        68.5344827586207, 68.3189655172414, 68.1034482758621, 67.8879310344828, 67.6724137931034, 67.4568965517241,
        67.2413793103448, 67.0258620689655, 66.8103448275862, 66.5948275862069, 66.3793103448276, 66.1637931034483,
        65.948275862069, 65.7327586206897, 65.5172413793103, 65.301724137931, 65.0862068965517, 64.8706896551724,
        64.6551724137931, 64.4396551724138, 64.2241379310345, 64.0086206896552, 63.7931034482759, 63.5775862068966,
        63.3620689655172, 63.1465517241379, 62.9310344827586, 62.7155172413793, 62.5, 62.2844827586207,
        62.0689655172414, 61.8534482758621, 61.6379310344828, 61.4224137931034, 61.2068965517241, 60.9913793103448,
        60.7758620689655, 60.5603448275862, 60.3448275862069, 60.1293103448276, 59.9137931034483, 59.698275862069,
        59.4827586206897, 59.2672413793103, 59.051724137931, 58.8362068965517, 58.6206896551724, 58.4051724137931,
        58.1896551724138, 57.9741379310345, 57.7586206896552, 57.5431034482759, 57.3275862068966, 57.1120689655172,
        56.8965517241379, 56.6810344827586, 56.4655172413793, 56.25, 56.0344827586207, 55.8189655172414,
        55.6034482758621, 55.3879310344828, 55.1724137931034, 54.9568965517241, 54.7413793103448, 54.5258620689655,
        54.3103448275862, 54.0948275862069, 53.8793103448276, 53.6637931034483, 53.448275862069, 53.2327586206897,
        53.0172413793103, 52.801724137931, 52.5862068965517, 52.3706896551724, 52.1551724137931, 51.9396551724138,
        51.7241379310345, 51.5086206896552, 51.2931034482759, 51.0775862068966, 50.8620689655172, 50.6465517241379,
        50.4310344827586, 50.2155172413793, 50, 49.7844827586207, 49.5689655172414, 49.3534482758621, 49.1379310344828,
        48.9224137931034, 48.7068965517241, 48.4913793103448, 48.2758620689655, 48.0603448275862, 47.8448275862069,
        47.6293103448276, 47.4137931034483, 47.198275862069, 46.9827586206897, 46.7672413793103, 46.551724137931,
        46.3362068965517, 46.1206896551724, 45.9051724137931, 45.6896551724138, 45.4741379310345, 45.2586206896552,
        45.0431034482759, 44.8275862068966, 44.6120689655172, 44.3965517241379, 44.1810344827586, 43.9655172413793,
        43.75, 43.5344827586207, 43.3189655172414, 43.1034482758621, 42.8879310344828, 42.6724137931034,
        42.4568965517241, 42.2413793103448, 42.0258620689655, 41.8103448275862, 41.5948275862069, 41.3793103448276,
        41.1637931034483, 40.948275862069, 40.7327586206897, 40.5172413793103, 40.301724137931, 40.0862068965517,
        39.8706896551724, 39.6551724137931, 39.4396551724138, 39.2241379310345, 39.0086206896552, 38.7931034482759,
        38.5775862068966, 38.3620689655172, 38.1465517241379, 37.9310344827586, 37.7155172413793, 37.5,
        37.2844827586207, 37.0689655172414, 36.8534482758621, 36.6379310344828, 36.4224137931034, 36.2068965517241,
        35.9913793103448, 35.7758620689655, 35.5603448275862, 35.3448275862069, 35.1293103448276, 34.9137931034483,
        34.698275862069, 34.4827586206897, 34.2672413793103, 34.051724137931, 33.8362068965517, 33.6206896551724,
        33.4051724137931, 33.1896551724138, 32.9741379310345, 32.7586206896552, 32.5431034482759, 32.3275862068966,
        32.1120689655172, 31.8965517241379, 31.6810344827586, 31.4655172413793, 31.25, 31.0344827586207,
        30.8189655172414, 30.6034482758621, 30.3879310344828, 30.1724137931034, 29.9568965517241, 29.7413793103448,
        29.5258620689655, 29.3103448275862, 29.0948275862069, 28.8793103448276, 28.6637931034483, 28.448275862069,
        28.2327586206897, 28.0172413793103, 27.801724137931, 27.5862068965517, 27.3706896551724, 27.1551724137931,
        26.9396551724138, 26.7241379310345, 26.5086206896552, 26.2931034482759, 26.0775862068966, 25.8620689655172,
        25.6465517241379, 25.4310344827586, 25.2155172413793, 25, 24.7844827586207, 24.5689655172414, 24.3534482758621,
        24.1379310344828, 23.9224137931034, 23.7068965517241, 23.4913793103448, 23.2758620689655, 23.0603448275862,
        22.8448275862069, 22.6293103448276, 22.4137931034483, 22.198275862069, 21.9827586206897, 21.7672413793103,
        21.551724137931, 21.3362068965517, 21.1206896551724, 20.9051724137931, 20.6896551724138, 20.4741379310345,
        20.2586206896552, 20.0431034482759, 19.8275862068966, 19.6120689655172, 19.3965517241379, 19.1810344827586,
        18.9655172413793, 18.75, 18.5344827586207, 18.3189655172414, 18.1034482758621, 17.8879310344828,
        17.6724137931034, 17.4568965517241, 17.2413793103448, 17.0258620689655, 16.8103448275862, 16.5948275862069,
        16.3793103448276, 16.1637931034483, 15.948275862069, 15.7327586206897, 15.5172413793103, 15.301724137931,
        15.0862068965517, 14.8706896551724, 14.6551724137931, 14.4396551724138, 14.2241379310345, 14.0086206896552,
        13.7931034482759, 13.5775862068966, 13.3620689655172, 13.1465517241379, 12.9310344827586, 12.7155172413793,
        12.5, 12.2844827586207, 12.0689655172414, 11.8534482758621, 11.6379310344828, 11.4224137931034,
        11.2068965517241, 10.9913793103448, 10.7758620689655, 10.5603448275862, 10.3448275862069, 10.1293103448276,
        9.91379310344828, 9.69827586206896, 9.48275862068966, 9.26724137931034, 9.05172413793104, 8.83620689655172,
        8.62068965517241, 8.4051724137931, 8.18965517241379, 7.97413793103449, 7.75862068965517, 7.54310344827587,
        7.32758620689655, 7.11206896551724, 6.89655172413793, 6.68103448275862, 6.46551724137931, 6.25,
        6.03448275862069, 5.81896551724138, 5.60344827586207, 5.38793103448276, 5.17241379310345, 4.95689655172413,
        4.74137931034483, 4.52586206896551, 4.31034482758621, 4.0948275862069, 3.87931034482759, 3.66379310344828,
        3.44827586206896, 3.23275862068966, 3.01724137931034, 2.80172413793104, 2.58620689655172, 2.37068965517241,
        2.1551724137931, 1.93965517241379, 1.72413793103449, 1.50862068965517, 1.29310344827587, 1.07758620689655,
        0.862068965517238, 0.646551724137934, 0.431034482758619, 0.215517241379315, 0
};



float socEstimation(float deltaTime);


#endif //HVC_FIRMWARE_2024_SOC_ESTIMATION_H
